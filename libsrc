-- PurpleUI Example Script
-- This demonstrates all features of the library

-- Load the library from GitHub (replace with your actual raw GitHub URL)
local PurpleUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/yourusername/purpleui/main/PurpleUI.lua"))()

-- Create main window
local Window = PurpleUI:CreateWindow("PurpleUI Demo", UDim2.new(0, 550, 0, 650))

-- Tab 1: Main Features
local MainTab = Window:AddTab("Main")

MainTab:AddSection("Basic Elements")

MainTab:AddLabel("Welcome to PurpleUI! A modern ImGui-style library")

MainTab:AddButton("Click Me!", function()
    Window:Notify("Button Clicked", "You clicked the button!", 2)
end)

MainTab:AddToggle("Enable Feature", false, function(state)
    print("Toggle state:", state)
    if state then
        Window:Notify("Enabled", "Feature has been enabled!", 1.5)
    else
        Window:Notify("Disabled", "Feature has been disabled!", 1.5)
    end
end)

MainTab:AddDivider()

MainTab:AddSlider("Speed Value", 0, 100, 50, function(value)
    print("Slider value:", value)
end)

MainTab:AddSlider("Volume", 0, 1, 0.5, function(value)
    print("Volume:", value)
end)

MainTab:AddDivider()

MainTab:AddDropdown("Select Option", {"Option 1", "Option 2", "Option 3", "Option 4"}, "Option 1", function(selected)
    print("Selected:", selected)
    Window:Notify("Selection Changed", "You selected: " .. selected, 2)
end)

MainTab:AddTextbox("Username", "Player123", function(text)
    print("Username:", text)
end)

-- Tab 2: Advanced Features
local AdvancedTab = Window:AddTab("Advanced")

AdvancedTab:AddSection("Advanced Controls")

AdvancedTab:AddColorPicker("Theme Color", Color3.fromRGB(147, 51, 234), function(color)
    print("Color picked:", color)
    Window:Notify("Color Changed", string.format("RGB(%d, %d, %d)", color.R * 255, color.G * 255, color.B * 255), 2)
end)

AdvancedTab:AddKeybind("Toggle Menu", Enum.KeyCode.RightShift, function(key)
    print("Keybind set to:", key.Name)
    Window:Notify("Keybind Updated", "New key: " .. key.Name, 2)
end)

AdvancedTab:AddDivider()

AdvancedTab:AddParagraph("About PurpleUI", 
    "PurpleUI is a modern UI library inspired by Dear ImGui with a beautiful purple theme. " ..
    "It features smooth animations, gradients, and a clean design perfect for your Roblox scripts!")

AdvancedTab:AddButton("Test Notification System", function()
    Window:Notify("Test Notification", "This is a test notification!", 3)
    wait(0.5)
    Window:Notify("Success!", "All systems operational", 2)
    wait(0.5)
    Window:Notify("Info", "You can stack multiple notifications", 2)
end)

-- Tab 3: Settings
local SettingsTab = Window:AddTab("Settings")

SettingsTab:AddSection("Application Settings")

SettingsTab:AddToggle("Auto Save", true, function(state)
    print("Auto Save:", state)
end)

SettingsTab:AddToggle("Notifications", true, function(state)
    print("Notifications:", state)
end)

SettingsTab:AddToggle("Sound Effects", false, function(state)
    print("Sound Effects:", state)
end)

SettingsTab:AddDivider()

SettingsTab:AddSlider("UI Scale", 0.5, 2, 1, function(value)
    print("UI Scale:", value)
end)

SettingsTab:AddDropdown("Theme", {"Dark Purple", "Light Purple", "Blue", "Red"}, "Dark Purple", function(theme)
    print("Theme:", theme)
end)

SettingsTab:AddDivider()

SettingsTab:AddButton("Reset to Defaults", function()
    Window:Notify("Reset", "Settings reset to default values", 2)
end)

SettingsTab:AddButton("Save Configuration", function()
    Window:Notify("Saved", "Configuration has been saved!", 2)
end)

-- Tab 4: Player Functions (Example for an executor)
local PlayerTab = Window:AddTab("Player")

PlayerTab:AddSection("Character Controls")

PlayerTab:AddSlider("Walk Speed", 16, 200, 16, function(value)
    local player = game.Players.LocalPlayer
    if player and player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.WalkSpeed = value
        Window:Notify("Speed Updated", "Walk speed set to " .. value, 1.5)
    end
end)

PlayerTab:AddSlider("Jump Power", 50, 300, 50, function(value)
    local player = game.Players.LocalPlayer
    if player and player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.JumpPower = value
        Window:Notify("Jump Updated", "Jump power set to " .. value, 1.5)
    end
end)

PlayerTab:AddDivider()

PlayerTab:AddButton("Reset Character", function()
    local player = game.Players.LocalPlayer
    if player and player.Character then
        player.Character:BreakJoints()
        Window:Notify("Reset", "Character has been reset", 2)
    end
end)

PlayerTab:AddToggle("Infinite Jump", false, function(state)
    local player = game.Players.LocalPlayer
    
    if state then
        -- Enable infinite jump
        _G.InfiniteJumpConnection = game:GetService("UserInputService").JumpRequest:Connect(function()
            if player and player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end)
        Window:Notify("Enabled", "Infinite jump activated!", 2)
    else
        -- Disable infinite jump
        if _G.InfiniteJumpConnection then
            _G.InfiniteJumpConnection:Disconnect()
            _G.InfiniteJumpConnection = nil
        end
        Window:Notify("Disabled", "Infinite jump deactivated!", 2)
    end
end)

PlayerTab:AddToggle("No Clip", false, function(state)
    local player = game.Players.LocalPlayer
    
    if state then
        -- Enable noclip
        _G.NoClipConnection = game:GetService("RunService").Stepped:Connect(function()
            if player and player.Character then
                for _, part in pairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
        Window:Notify("Enabled", "No clip activated!", 2)
    else
        -- Disable noclip
        if _G.NoClipConnection then
            _G.NoClipConnection:Disconnect()
            _G.NoClipConnection = nil
        end
        if player and player.Character then
            for _, part in pairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
        Window:Notify("Disabled", "No clip deactivated!", 2)
    end
end)

-- Tab 5: Information
local InfoTab = Window:AddTab("Info")

InfoTab:AddSection("Library Information")

InfoTab:AddParagraph("Version", "PurpleUI Library v1.0.0")

InfoTab:AddParagraph("Features",
    "• Modern ImGui-inspired design\n" ..
    "• Smooth animations and transitions\n" ..
    "• Beautiful purple gradient theme\n" ..
    "• Rounded corners (UICorner)\n" ..
    "• Draggable windows\n" ..
    "• Tab system\n" ..
    "• Multiple element types\n" ..
    "• Notification system\n" ..
    "• Responsive design")

InfoTab:AddDivider()

InfoTab:AddButton("GitHub Repository", function()
    Window:Notify("GitHub", "Repository URL copied to clipboard!", 2)
    -- In a real scenario, you'd copy to clipboard
end)

InfoTab:AddButton("Report Bug", function()
    Window:Notify("Bug Report", "Please report bugs on our GitHub!", 3)
end)

InfoTab:AddDivider()

InfoTab:AddLabel("Created with ❤️ for the Roblox community")

-- Show a welcome notification
wait(0.5)
Window:Notify("Welcome!", "PurpleUI has been loaded successfully!", 3)

print("PurpleUI Example loaded successfully!")
print("Access flags via Window.Flags table")
print("Example: print(Window.Flags.Enable_Feature)")

-- Example of accessing flag values
task.spawn(function()
    while wait(5) do
        print("Current flags:")
        for flag, value in pairs(Window.Flags) do
            print(flag, "=", value)
        end
    end
end)
